---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# GOTeDNA
## An R package for guidance on optimal eDNA sampling periods to develop, optimize, and interpret monitoring programs

<!-- badges: start -->
<!-- badges: end -->

The goal of GOTeDNA is to import and format eDNA qPCR and metabarcoding metadata/data from GOTeDNA sample templates, visualize species detection periods, and statistically delineate optimal species detection windows.

## Installation

You can install the development version of GOTeDNA from [GitHub](https://github.com/) with:

``` r
# install.packages("devtools")
devtools::install_github("mkmor/GOTeDNA")
```

## Usage


### R function categories:
- Import data
- Clean/tidy data
- Visualization

```{R}
library("GOTeDNA")
```


### Clean/tidy data

```{R}
newprob <- calc_det_prob(data = D_mb_ex)
scaledprobs <- scale_newprob(D_mb_ex, newprob)
win <- calc_window(
  data = D_mb_ex, threshold = "90", species.name = "Acartia longiremis",scaledprobs
)
```


### Heat map 

```{R hm}
hm_fig(
   taxon.level = "class", taxon.name = "Copepoda", scaledprobs)
```

### Effort needed

```{R effort}
effort_needed_fig(
  species.name = "Acartia hudsonica", primer.select = "COI1", scaledprobs
)
```
ecodistrict.select = "Scotian Shelf",
### Sampling effort

```{R higher}
higher_tax_fig(
  data = D_mb_ex, 
  higher.taxon.select = "phylum", 
  taxon.name = "Bryozoa",
  view.by.level = "genus", 
  primer.select = "COI1"
)
```

### Sample size 

```{R sample_size}
sample_size_fig(data = D_mb_ex, species.name = "Acartia hudsonica")
```

### Species monthly detection

```{R smooth}
smooth_fig(
  data = D_mb_ex, species.name = "Acartia longiremis",
  primer.select = "COI1"
)
```


### Monthly detection probabilities

```{R thresh_fig}
thresh_fig(taxon.level = "species", taxon.name = "Acartia hudsonica", 
  threshold = "75", scaledprobs)
```


### Shiny 

Once the package loaded, the shiny can be launched using the following function.

```R
run_gotedna_app()
```

There is also a docker file available: 

```sh
# build the container 
docker build -t gotedna . 
# use the container
docker run -it --rm --network host gotedna 
# the shiny will be available at http://0.0.0.0:9292
```